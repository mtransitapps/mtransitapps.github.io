<!DOCTYPE html>
<html>
	<head>
		<title>MonTransit Build status</title>
		<style type="text/css">
			.icon {
				height: 13px;
				width: 13px;
			}
			table, th, td {
				border: 1px solid black;
				border-collapse: collapse;
			}
			td {
				vertical-align: top;
			}
		</style>
		<script type="text/javascript">
			window.onload = function() {
				var projects = [
					"mtransit-for-android",
					"ca-brampton-transit-bus",
					"ca-durham-region-transit-bus",
					"ca-edmonton-ets-bus",
					"ca-edmonton-ets-train",
					"ca-gatineau-sto-bus",
					"ca-halifax-transit-bus",
					"ca-halifax-transit-ferry",
					"ca-le-richelain-citlr-bus",
					"ca-london-transit-bus",
					"ca-montreal-bixi-bike",
					"ca-oakville-transit-bus",
					"ca-ottawa-oc-transpo-bus",
					"ca-ottawa-oc-transpo-train",
					"ca-prince-george-transit-system-bus",
					"ca-quebec-orleans-express-bus",
					"ca-quebec-rtc-bus",
					"ca-red-deer-transit-bus",
					"ca-regina-transit-bus",
					"ca-richelieu-citvr-bus",
					"ca-roussillon-citrous-bus",
					"ca-strathcona-county-transit-bus",
					"ca-sudbury-transit-bus",
					"ca-thunder-bay-transit-bus",
					"ca-toronto-share-bike",
					"ca-toronto-ttc-bus",
					"ca-toronto-ttc-light-rail",
					"ca-toronto-ttc-subway",
					"ca-vancouver-mobi-bike",
					"ca-winnipeg-transit-bus",
					"ca-york-region-yrt-viva-bus",
					"us-anchorage-people-mover-bus",
					"us-clark-county-c-tran-bus",
					"us-everett-transit-bus",
					"us-juneau-capital-transit-bus",
					"us-longview-rivercities-transit-bus",
					"us-snohomish-county-community-transit-bus",
					"us-washington-state-ferry"
				];
				var branches = [
					// "master", // TODO later
					"mmathieum"
				];
				var projectsTable = document.getElementById("projects-table");
				for (p = 0; p < projects.length; p++) {
					var project = projects[p];
					var projectUrl = project;
					if (!projectUrl.endsWith("-android")) {
						projectUrl = projectUrl + "-android";
					}
					for (b = 0; b < branches.length; b++) {
						var branch = branches[b];
						var row = projectsTable.insertRow(); // append at the bottom
						var c = 0;
						if (b == 0) {
							var cellProjectNameWithIcon = row.insertCell(c);
							cellProjectNameWithIcon.rowSpan = ""+branches.length+"";
							cellProjectNameWithIcon.innerHTML =
								"<img class=\"icon\" src=\"https://raw.githubusercontent.com/mtransitapps/"+projectUrl+"/"+branch+"/src/main/play/listings/en-US/graphics/icon/1.png\">"
								+ project;
							c++;
						}
						var cellBranchName = row.insertCell(c++);
						cellBranchName.innerHTML = branch;
						var cellCircleCI = row.insertCell(c++);
						cellCircleCI.innerHTML =
							"<a href=\"https://circleci.com/gh/mtransitapps/"+project+"-gradle/tree/"+branch+"\" rel=\"nofollow\">"
								+ "<img alt=\"CircleCI\""
									+ "src=\"https://circleci.com/gh/mtransitapps/"+project+"-gradle/tree/"+branch+".svg?style=svg\">"
							+ "</a>";
						var cellTravisCI = row.insertCell(c++);
						cellTravisCI.innerHTML =
							"<a href=\"https://travis-ci.org/mtransitapps/"+project+"-gradle/\" rel=\"nofollow\">"
								+ "<img alt=\"Travis CI\""
									+ "src=\"https://api.travis-ci.org/mtransitapps/"+project+"-gradle.svg?branch="+branch+"\">"
							+ "</a>";
						var cellGitLab = row.insertCell(c++);
						if (project == "mtransit-for-android") {
							cellGitLab.innerHTML =
								"<a href=\"https://gitlab.com/mtransitapps/"+project+"-gradle/pipelines\" rel=\"nofollow\">"
									+ "<img alt=\"GitLab\""
										+ "src=\"https://gitlab.com/mtransitapps/"+project+"-gradle/badges/"+branch+"/pipeline.svg\">"
								+ "</a>";
						} else {
							cellGitLab.innerHTML = "<!-- TODO GitLab -->";
						}
						var cellBitrise = row.insertCell(c++);
						if (project == "mtransit-for-android") {
							cellBitrise.innerHTML =
								"<a href=\"https://app.bitrise.io/app/16352774a3da9a41\" rel=\"nofollow\">"
									+ "<img alt=\"Bitrise\""
										+ "src=\"https://app.bitrise.io/app/16352774a3da9a41/status.svg?token=Ue0WAJU3awNJm80pty5K_g&branch="+branch+"\">"
								+ "</a>";
						} else {
							cellBitrise.innerHTML = "<!-- TODO Bitrise -->";
						}
					}
				}
			};
		</script>
	</head>
	<body>
		<h2>MonTransit Build status</h2>

		<table id="projects-table">
			<thead>
				<tr>
					<th>Project</th>
					<th>Branch</th>
					<th>CircleCI</th>
					<th>Travis CI</th>
					<th>GitLab CI</th>
					<th>Bitrise</th>
				</tr>
			</thead>
			<tbody>
				<!-- Filled with JavaScript -->
			</tbody>
		</table>
	</body>
</html>
